<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8">
  <title>04_模板解析_表达式_vue</title>
  <script src="./js/mvvm.js"></script>
  <script src="./js/compile.js"></script>
  <script src="./js/observer.js"></script>
  <script src="./js/watcher.js"></script>
</head>

<body>
  <!--html模版-->
  <!--当前的这个id为app的这个div可以看成是这个html模版中的html容器,最终肯定是在这个容器中针对msg这个表达式来进行解析-->
  <div id="app">
    <p>{{msg}}</p>
  </div>
  <script type="text/javascript">
    // 模版解析之表达式的解析是如何实现的,msg属性中的数据最终是怎么显示到html标签中
    const vm = new MVVM({
      el: '#app',
      data: {
        msg: '今天中午吃什么'
      }
    })

    /*
      模版:html标签(整体)
      容器:id为app的这个div标签
      data中的msg---->属性
      html模版(容器中)的msg----->表达式
      解析:把代码进行解析(编译)的过程,最终html中的表达式msg,可以显示成 : 今天中午吃什么 的过程就是解析的过程
      html模版中 ----->{{msg}}----->插值语法
    
    
    */

    /*
      谈谈 模版解析中的表达式的解析操作
      1.创建MVVM实例对象的时候,需要在内部创建编译对象,并传入当前的html容器对象(最开始传入的是选择器,编译对象内部会根据选择器来获取html容器对象div),
      2.创建文档碎片对象,把div容器中所有的子节点全都放在文档碎片对象中,然后在内存中进行表达式的解析操作
      3.内存中要遍历文档碎片对象中所有的节点,判断当前的节点是不是文本节点同时是否满足插值语法的正则表达式
      4.如果满足插值的正则匹配条件,内部最终会根据vm获取msg表达式的值,调用bind方法进行解析操作,最终里面会调用updater对象中的方法把插值文本替换成msg表达式的值
      5.最后把内存中解析后文档碎片对象重新放进div容器中即可




      总结步骤:
      1.实例化MVVM对象
      2.实例化Compile编译对象
      3.创建文档碎片对象
      4.把div容器中所有的节点扔进文档碎片对象
      5.内存中开始解析,调用bind方法的时候会根据vm获取msg的值,
      6.调用updater对象中方法进行插值语法的替换
    
    */
















    /*

      面试题:说说你对Vue中的插值语法的解析的理解(编译的理解)或者说说你对插值语法的理解
      所谓的插值语法的解析:在实例化Vue的时候,内部会创建一个编译对象,并传入当前的html容器的选择器,及vm实例对象
      编译对象内部会根据选择器获取html中的容器对象,同时保存vm实例对象,进行编译操作,先创建一个虚拟DOM(文档碎片对象),然后html容器内部所有的节点全部的扔进文档碎片对象中,紧接着遍历里面所有的节点,并且获取节点文本内容及定义插值语法的正则表达式,判断当前的节点是标签还是文本,如果是文本则再判断当前的文本内容与插值语法的正则是否匹配,
      如果是标签暂且不考虑,如果是文本并且与插值语法匹配,内部先获取当前的文本节点,提取出插值语法中的表达式
      下一步通过vm实例对象获取当前这个表达式的值,在bind方法内部获取updater对象中相关的解析插值语法的方法,把文本节点通过textContent属性替换成表达式的值,这些操作都是在内存中的文档碎片对象中进行操作,结束后,最后把文档碎片对象重新的扔进到html容器中即可



    */

    /*
    
    正则表达式又叫规则表达式,里面有很多的符号,这些符号具有一定意义,有一些特殊的符号组成的这个表达式,叫正则表达式,作用:用来匹配字符串的
    这些符号: 叫元字符(也包括限定符)
    正则表达式最早是出现在神经学领域中

    下面的这些符号:都是元字符,由元字符组成的表达式叫正则表达式

    .  除了\n以外任意的一个单个字符  "baby025"  
    [] 范围/干掉元字符本身的意义  [3-8] 3到8之间任意的一个数字(包含3,包含8),
          [0-9] 0到9之间任意的单个的数字(包含)  [a-z] 所有的小写字母中的任意一个 [A-Z] 大写的字母中任意一个 
          表示所有的字母中任意一个: [a-zA-Z] 
          标识 11到19中的任意一个数字   [1][1-9]
          [.]  此时表示的就是.
    ()  提升优先级/提取组  [0-9]([a-z][A-Z])   ([0-9]([a-z]([A-Z][.]))) 有几对括号就是有几组 有三组
        ([0-9]([a-z]([A-Z][.]))) 有三组 从左向右计算组数 ,最左边的是第一组,依次向右计算组数
        正则中如何获取 某一组?  RegExp.$1---->第一组  RegExp.$4 ---->第四组
    |   或者的意思  ([4-8])|([a-y])

    ^   必须以什么什么开头 ^[0-9]  该正则匹配的字符串必须是某个数字开头 "fsfsdf3"   ^ 取非  [^0-9] 非数字
    $   必须以什么什么结尾  [0-9]$ 该正则匹配的字符串必须是以某个数字结尾  "fsfdsf3"
    限定符 : 该符号前面的表达式出现了多少次,限定次数
    *  该符号前面的表达式出现了0次到多次   [a-z]*  "fsdfsd"
    +  该符号前面的表达式出现了1次到多次   最少一次 [a-z]+  "fsdf"
    ?  该符号前面的表达式出现了0次到1次   最少是0次 最多是一次   阻止贪婪模式? 
    {} 限定前面的表达式出现多少次
    {0,} 该符号前面的表达式出现了0次到多次 
    {1,} 该符号前面的表达式出现了1次到多次
    {0,1}  该符号前面的表达式出现了0次到1次
    {4,9}  该符号前面的表达式出现了4次到9次
    {,9}  错误写法
    

    [0-9]  \d 尽可能的不要在一个正则出现\d和[0-9]  不美观,

    \d   数字中的任意一个 ,类似于[0-9]
    \D   非数字中任意一个
    \s   空白符号中任意一个   "    "
    \S   非空白符号   "fsd33"
    \w   非特殊符号  [0-9a-zA-Z_]
    \W   特殊符号    [^0-9a-zA-Z_]
    \b   单词的边界,结束

    初级程序员用百度(目前我们所学内容通过百度几乎都可以解决,知乎,简书...博客园,CDN),高级程序员用谷歌,专业程序员用文档


    能够写出基本的正则即可,其余的可以百度搜索(搜索出来的正则表达式未必是准确的,修改----清楚)
    
    */


    // var reg =/[3-8]/
    // console.log(reg.test('12903'))

    // var reg =/[c-o]/
    // console.log(reg.test('cabd'))

    // var reg = /[a-z]+/
    // console.log(reg.test('f1313'))

    // 给我一个网址 我可以把这个网址中所有我想要的东西 通过正则 匹配 并下载下来, 8行代码之内
    // 邮箱的正则
    // var reg = /([0-9a-zA-Z_.-]+)[@][0-9a-zA-Z_.-]+([.][a-zA-Z]+){1,2}/
    // console.log(reg.test('younghongbo@126.com'))
    // console.log(RegExp.$1)

    // 论坛中:发表帖子:  我有资源,大家留下邮箱,后发
    // younghongbo@126.com

    // 姓名  [\u4e00-\u9fa5]{2,6}  姓名中 2个到6个字

  </script>
</body>

</html>